var _CQ = {
  "CQ WCM modes": {
    "Disabled": {
      "title": "Disabled",
      "url": "",
      "url_path": "",
      "param": "wcmmode=disabled",
      "icon": "icons/adobe.png"
    },
    "Preview": {
      "title": "Preview",
      "url": "",
      "url_path": "",
      "param": "wcmmode=preview",
      "icon": "icons/preview.png"
    },
    "Edit": {
      "title": "Edit",
      "url": "",
      "url_path": "",
      "param": "wcmmode=edit",
      "icon": "icons/edit.png"
    }
  },
  "Debug": {
    "Layout": {
      "title": "Layout",
      "url": "",
      "url_path": "",
      "param": "debug=layout",
      "icon": "icons/debug.png"
    },
    "Client Libs": {
      "title": "Client Libs",
      "url": "",
      "url_path": "",
      "param": "debugClientLibs=true",
      "icon": "icons/debug.png"
    }
  },
  "CQ pages": {
    "Groovy Console": {
      "title": "Groovy Console",
      "url": "",
      "url_path": "/etc/groovyconsole.html",
      "param": "",
      "icon": "icons/cq.png"
    },
    "Package manager": {
      "title": "Package manager",
      "url": "",
      "url_path": "/crx/packmgr/index.jsp",
      "param": "",
      "icon": "icons/cq.png"
    },
    "Login to WCM": {
      "title": "Login to WCM",
      "url": "",
      "url_path": "/login.html",
      "param": "",
      "icon": "icons/cq.png"
    },
    "WCM": {
      "title": "WCM",
      "url": "",
      "url_path": "/siteadmin",
      "param": "",
      "icon": "icons/cq.png"
    },
    "CRX": {
      "title": "CRX",
      "url": "",
      "url_path": "/crx/explorer",
      "param": "",
      "icon": "icons/cq.png"
    },
    "CRXDE": {
      "title": "CRXDE",
      "url": "",
      "url_path": "/crxde",
      "param": "",
      "icon": "icons/crxde.png"
    },
    "Felix console": {
      "title": "Felix console",
      "url": "",
      "url_path": "/system/console/configMgr",
      "param": "",
      "icon": "icons/adobe.png"
    },
    "Logs": {
      "title": "Logs",
      "url": "",
      "url_path": "/bin/crxde/logs",
      "param": "",
      "icon": "icons/adobe.png"
    },
    "JVM Status": {
      "title": "JVM Status",
      "url": "",
      "url_path": "/system/console/jmx/java.lang%3Atype%3DRuntime",
      "param": "",
      "icon": "icons/adobe.png"
    },
    "Sling logs": {
      "title": "Sling logs",
      "url": "",
      "url_path": "/system/console/status-slinglogs",
      "param": "",
      "icon": "icons/adobe.png"
    },
    "Translator": {
      "title": "Translator",
      "url": "",
      "url_path": "/libs/cq/i18n/translator.html",
      "param": "",
      "icon": "icons/cq.png"
    },
    "Replication": {
      "title": "Replication",
      "url": "",
      "url_path": "/etc/replication.html",
      "param": "",
      "icon": "icons/cq.png"
    }
  },
  "CQ Instances": {
    "CI Publish": {
      "title": "CI Publish",
      "url": "http://54.72.37.45:8081",
      "url_path": "/content/moneysupermarket/en_gb/insurance/car-insurance/question-set/results.html#?enquiryId=6f8ef842-ac7d-4758-8279-5d7b270362bd",
      "param": "",
      "icon": "icons/siteadmin.png"
    },
    "CI Author": {
      "title": "CI Author",
      "url": "http://54.72.37.45:8080",
      "url_path": "/content/moneysupermarket/en_gb/insurance/car-insurance/question-set/results.html#?enquiryId=6f8ef842-ac7d-4758-8279-5d7b270362bd",
      "param": "",
      "icon": "icons/siteadmin.png"
    },
    "Jenkins": {
      "title": "Jenkins",
      "url": "http://54.72.16.117:8080",
      "url_path": "",
      "param": "",
      "icon": "icons/siteadmin.png"
    },
    "Frontend CI": {
      "title": "Frontend CI",
      "url": "http://54.72.16.117:9000",
      "url_path": "/#/motorinsurance/results?enquiryId=6f8ef842-ac7d-4758-8279-5d7b270362bd&partialEnquiryId=undefined",
      "param": "",
      "icon": "icons/siteadmin.png"
    },
    "QA ELB": {
      "title": "QA ELB",
      "url": "http://msm-qa-elb-pub-1969091497.eu-west-1.elb.amazonaws.com/car-insurance.html",
      "url_path": "",
      "param": "",
      "icon": "icons/siteadmin.png"
    },
    "CI ELB": {
      "title": "CI ELB",
      "url": "http://msm-ci-elb-pub-2026406112.eu-west-1.elb.amazonaws.com/car-insurance.html",
      "url_path": "",
      "param": "",
      "icon": "icons/siteadmin.png"
    },
    "SIT 1 Publish": {
      "title": "SIT 1 Publish",
      "url": "http://54.76.189.18:8081/car-insurance.html",
      "url_path": "",
      "param": "",
      "icon": "icons/siteadmin.png"
    },
    "SIT 1 Author": {
      "title": "SIT 1 Author",
      "url": "http://54.76.189.18:8080/",
      "url_path": "",
      "param": "",
      "icon": "icons/siteadmin.png"
    },
    "SIT 1 ELB": {
      "title": "SIT 1 ELB",
      "url": "www.sit1.gb.moneysupermarket.com/car-insurance.html",
      "url_path": "",
      "param": "",
      "icon": "icons/siteadmin.png"
    }
  },
  "Confluence": {
    "AEM Environments": {
      "title": "AEM Environments",
      "url": "https://moneysupermarket.atlassian.net/wiki/display/KS/AEM+Environments",
      "url_path": "",
      "param": "",
      "icon": "icons/siteadmin.png"
    }
  }
};

var _CQ_CHROME_UTILS_BUILD_VER = '1.0.2';

var _SETTINGS_NAME = '_CQ' + '_' + _CQ_CHROME_UTILS_BUILD_VER;

if(localStorage['_CQ_CHROME_UTILS_BUILD_VER'] != _CQ_CHROME_UTILS_BUILD_VER) {
    localStorage.removeItem(_SETTINGS_NAME);
    localStorage.setItem('_CQ_CHROME_UTILS_BUILD_VER',_CQ_CHROME_UTILS_BUILD_VER);
}

_DEFAULT_CQ = _CQ;

if (localStorage[_SETTINGS_NAME] && localStorage[_SETTINGS_NAME] != '{}') {
    _CQ = JSON.parse(localStorage.getItem(_SETTINGS_NAME));
} else {
    localStorage.setItem(_SETTINGS_NAME, JSON.stringify(_CQ));
}

//TODO add merge step: old user settings with new one

function _SAVE_TO_LOCAL_STORAGE(newCQ) {
    localStorage.setItem(_SETTINGS_NAME, JSON.stringify(newCQ));
}